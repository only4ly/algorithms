<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for solutions/strassen.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">solutions/</a> strassen.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">93.55% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>58/62</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">75% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>12/16</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>3/3</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">91.67% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>44/48</span>
      </div>
    </div>
  </div>
  <div class='status-line high'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78</td><td class="line-coverage quiet"><span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">132×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">84×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">65×</span>
<span class="cline-any cline-yes">56×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">10×</span>
<span class="cline-any cline-yes">10×</span>
<span class="cline-any cline-yes">10×</span>
<span class="cline-any cline-yes">10×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">10×</span>
<span class="cline-any cline-yes">10×</span>
<span class="cline-any cline-yes">10×</span>
<span class="cline-any cline-yes">10×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">10×</span>
<span class="cline-any cline-yes">10×</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">const matrixAdd = function (A, B) {
  return A.map((item, index1) =&gt; item.map((item2, index2) =&gt; A[index1][index2] + B[index1][index2]))
}
const matrixMinus = function (A, B) {
  return A.map((item, index1) =&gt; item.map((item2, index2) =&gt; A[index1][index2] - B[index1][index2]))
}
// 矩阵乘法 strassen解法
const strassen = function (A, B) {
  // console.log('------------------')
  // console.log('A', A)
  // console.log('B', B)
  // 递归终止条件
  if (A.length === 1 &amp;&amp; A[0].length === 1) {
    return [[A[0][0] * B[0][0]]]
  }
  <span class="missing-if-branch" title="if path not taken" >I</span>if (A.length !== A[0].length) {
<span class="cstat-no" title="statement not covered" >    throw new Error('不是n*n矩阵')</span>
  }
  <span class="missing-if-branch" title="if path not taken" >I</span>if ((A.length !== 1) &amp;&amp; ((A.length % 2) !== 0)) {
<span class="cstat-no" title="statement not covered" >    throw new Error('不是2^n*2^n矩阵')</span>
  }
  <span class="missing-if-branch" title="if path not taken" >I</span>if (B.length !== B[0].length) {
<span class="cstat-no" title="statement not covered" >    throw new Error('不是n*n矩阵')</span>
  }
  <span class="missing-if-branch" title="if path not taken" >I</span>if ((B.length !== 1) &amp;&amp; ((B.length % 2) !== 0)) {
<span class="cstat-no" title="statement not covered" >    throw new Error('不是2^n*2^n矩阵')</span>
  }
  // 8 个子矩阵
  const A11 = A.slice(0, A.length / 2).map(item =&gt; item.slice(0, A.length / 2))
  const A12 = A.slice(0, A.length / 2).map(item =&gt; item.slice(A.length / 2, A.length))
  const A21 = A.slice(A.length / 2, A.length).map(item =&gt; item.slice(0, A.length / 2))
  const A22 = A.slice(A.length / 2, A.length).map(item =&gt; item.slice(A.length / 2, A.length))
  // console.log('A11', A11)
  // console.log('A12', A12)
  // console.log('A21', A21)
  // console.log('A22', A22)
  const B11 = B.slice(0, B.length / 2).map(item =&gt; item.slice(0, B.length / 2))
  const B12 = B.slice(0, B.length / 2).map(item =&gt; item.slice(B.length / 2, B.length))
  const B21 = B.slice(B.length / 2, B.length).map(item =&gt; item.slice(0, B.length / 2))
  const B22 = B.slice(B.length / 2, B.length).map(item =&gt; item.slice(B.length / 2, B.length))
  // console.log(B11, B12, B21, B22)
  // console.log('B11', B11)
  // console.log('B12', B12)
  // console.log('B21', B21)
  // console.log('B22', B22)
  // 10 个矩阵变量
  const S1 = matrixMinus(B12, B22)
  const S2 = matrixAdd(A11, A12)
  const S3 = matrixAdd(A21, A22)
  const S4 = matrixMinus(B21, B11)
  const S5 = matrixAdd(A11, A22)
  const S6 = matrixAdd(B11, B22)
  const S7 = matrixMinus(A12, A22)
  const S8 = matrixAdd(B21, B22)
  const S9 = matrixMinus(A11, A21)
  const S10 = matrixAdd(B11, B12)
&nbsp;
  // 递归计算7次矩阵乘法
  const P1 = strassen(A11, S1)
  const P2 = strassen(S2, B22)
  const P3 = strassen(S3, B11)
  const P4 = strassen(A22, S4)
  const P5 = strassen(S5, S6)
  const P6 = strassen(S7, S8)
  const P7 = strassen(S9, S10)
&nbsp;
  // 计算结果的子矩阵
  const C11 = matrixMinus(matrixAdd(P5, P4), matrixMinus(P2, P6))
  const C12 = matrixAdd(P1, P2)
  const C21 = matrixAdd(P3, P4)
  const C22 = matrixMinus(matrixAdd(P5, P1), matrixAdd(P3, P7))
  // 合并成结果
  const C1 = C11.map((item, index) =&gt; item.concat(C12[index]))
  const C2 = C21.map((item, index) =&gt; item.concat(C22[index]))
  return C1.concat(C2)
}
module.exports = strassen
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Fri Jan 19 2018 09:45:55 GMT+0800 (CST)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
